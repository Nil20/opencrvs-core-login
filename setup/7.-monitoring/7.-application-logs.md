# 7.# Application logs

All services in the OpenCRVS architecture emit logs that can be observed in real-time. The most common use case for viewing logs is debugging an issue with the installation. These logs of each service are collected automatically by Docker Swarm and sent to Kibana for developers and maintainers to easily access. The items include information about HTTP requests and responses, informational logging (e.g. auth service sending a verification SMS) and errors happening as part of requests.&#x20;

#### Application logs

To access logs of a specific service, first, log in to Kibana and navigate to **Observability** -> **APM**, open up the service you want to observe **** and navigate to the **Logs -** tab. In this view, you see the complete standard output of the microservice. You can also search log items by providing a time range.

![](<../../.gitbook/assets/image (1).png>)

### Searching for logs

#### Log stream

By navigating to **Observability** -> **Logs** -> **Stream**, you see all logs of all applications in real time. This view also lets you search for specific events happening in the stack during a specified time range and search terms like the request URL, header value or other values in the request or in the response object. More information about this view can be read [here](https://www.elastic.co/guide/en/observability/current/tail-logs.html).

![](../../.gitbook/assets/image.png)



**Tracing a request through different services**

In the log stream view, you can see that all log items related to HTTP requests contain a header field called `elastic-apm-traceparent`.

```
"headers": {
  "elastic-apm-traceparent": "00-6be341213d9b92b6220d3f1b2eacbe84-d1ff19cd4225d9d2-01",
```

This field is extremely useful for getting an understanding of everything that happened during the request's lifecycle. If you take the second part of the&#x20;



Sometimes you want to get all log entries from all the different services a request went through. This can be done by following the `x-correlation-id` found in all requests originating from the OpenCRVS Gateway service.&#x20;

```
{
  "level": 30,
  "time": 1654761185773,
  "hostname": "ae437a458462",
  "req": {
    "id": "1654761185662:ae437a458462:27:l45vla4p:46749",
    "method": "get",
    "url": "/fhir/Task",
    "headers": {
      "content-type": "application/fhir+json",
      "authorization": "***",
      "x-correlation-id": "declare-7ba0bd1e-1114-48d3-ba51-3f4ec63810f2"
    },
    "remoteAddress": "10.0.6.9",
    "remotePort": 37782
  },
  "res": {
    "statusCode": 200
  },
  "responseTime": 111,
  "msg": "request completed"
}

```





